{"ast":null,"code":"var _jsxFileName = \"/Users/tyler/Documents/Programming/ReactApps/scheduler-app-database/client/src/components/generateScheduleButton/GenerateScheduleButton.js\",\n    _s = $RefreshSig$();\n\nimport { Button, Typography, Grid } from \"@material-ui/core\";\nimport { useState, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { editEmployee, getEmployees } from '../../actions/employees';\nimport weekShifts from '../../testData/weekShifts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst GenerateScheduleButton = () => {\n  _s();\n\n  let shifts = weekShifts;\n  const dispatch = useDispatch();\n  const employees = useSelector(state => state.employees);\n  const [employee, setEmployee] = useState(null);\n  const [schedule, setSchedule] = useState(null);\n  const [currentId, setCurrentId] = useState(null); // useEffect(() => {\n  //     updateEmployee(employee)\n  // })\n\n  const randomizeShifts = array => {\n    let shuffledArray = [];\n    let shift = null;\n\n    for (let i = array.length - 1; i >= 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [array[i], array[j]] = [array[j], array[i]];\n      shift = array[i];\n\n      for (let x = shift.length - 1; x >= 0; x--) {\n        const y = Math.floor(Math.random() * (x + 1));\n        [array[i][x], array[i][y]] = [array[i][y], array[i][x]];\n        shift = array[i][x];\n        shuffledArray.push(shift);\n      }\n    }\n\n    return shuffledArray;\n  };\n\n  const createSchedule = shifts => {\n    const updatedEmployees = employees;\n\n    while (shifts.length > 0) {\n      let currentEmployee = updatedEmployees[Math.floor(Math.random() * updatedEmployees.length)];\n      const shift = shifts[0];\n      const shiftStartTime = convertTimeToNumber(shifts[0].startDate.split(' ')[4]);\n      console.log(shiftStartTime);\n\n      if (canEmployeeTakeShift(currentEmployee, shift)) {\n        currentEmployee.weekSchedule.push(shift);\n        shifts.splice(shift, 1);\n      } // setSchedule({...schedule, shift})\n      // setEmployee({...currentEmployee, weekSchedule:[\n      //     schedule\n      // ]})\n\n    }\n\n    console.log(updatedEmployees); // const startTime = shift.startDate.split(' ').[4]\n    // const endTime = shift.endDate.split(' ').[4]\n    // console.log(shift)\n    // console.log(startTime)\n    // console.log(endTime)\n  };\n\n  const convertTimeToNumber = time => {\n    const startHour = time.split(':')[0];\n    const startMin = time.split(':')[1];\n    console.log(startHour + \" \" + startMin);\n    return startHour + \".\" + startMin;\n  };\n\n  const canEmployeeTakeShift = (employee, shift) => {\n    const shiftDay = shift.startDate.split(' ')[0];\n\n    if (employee) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const randomShiftsArray = randomizeShifts(shifts);\n    createSchedule(randomShiftsArray);\n    console.log(employees[0].availability[0].day); //dispatch(editEmployee(employee._id, employee))\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    container: true,\n    direction: \"column\",\n    justify: \"center\",\n    alignItems: \"center\",\n    children: /*#__PURE__*/_jsxDEV(Button, {\n      color: \"secondary\",\n      style: {\n        width: 300,\n        height: 50,\n        margin: 50\n      },\n      variant: \"contained\",\n      onClick: handleSubmit,\n      children: \"Generate Schedule\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n};\n\n_s(GenerateScheduleButton, \"5kIpb/EwrUSXGVr2wuTI7ukpcqg=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = GenerateScheduleButton;\nexport default GenerateScheduleButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"GenerateScheduleButton\");","map":{"version":3,"sources":["/Users/tyler/Documents/Programming/ReactApps/scheduler-app-database/client/src/components/generateScheduleButton/GenerateScheduleButton.js"],"names":["Button","Typography","Grid","useState","useEffect","useDispatch","useSelector","editEmployee","getEmployees","weekShifts","GenerateScheduleButton","shifts","dispatch","employees","state","employee","setEmployee","schedule","setSchedule","currentId","setCurrentId","randomizeShifts","array","shuffledArray","shift","i","length","j","Math","floor","random","x","y","push","createSchedule","updatedEmployees","currentEmployee","shiftStartTime","convertTimeToNumber","startDate","split","console","log","canEmployeeTakeShift","weekSchedule","splice","time","startHour","startMin","shiftDay","handleSubmit","e","preventDefault","randomShiftsArray","availability","day","width","height","margin"],"mappings":"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","sourcesContent":["import { Button, Typography, Grid } from \"@material-ui/core\"\nimport { useState, useEffect } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { editEmployee, getEmployees } from '../../actions/employees'\nimport weekShifts from '../../testData/weekShifts'\n\n\nconst GenerateScheduleButton = () => {\n    let shifts = weekShifts\n    const dispatch = useDispatch()\n    const employees = useSelector((state) => state.employees)\n    const [employee, setEmployee] = useState(null)\n    const [schedule, setSchedule] = useState(null)\n    const [currentId, setCurrentId] = useState(null)\n\n    // useEffect(() => {\n    //     updateEmployee(employee)\n    // })\n    \n\n    const randomizeShifts = (array) => {\n        let shuffledArray = []\n\n        let shift = null\n\n        for (let i = array.length - 1; i >= 0; i--) {\n            const j = Math.floor(Math.random() * (i + 1));\n            [array[i], array[j]] = [array[j], array[i]];\n            shift = array[i]\n\n            for (let x = shift.length - 1; x >= 0; x--) {\n                const y = Math.floor(Math.random() * (x + 1));\n                [array[i][x], array[i][y]] = [array[i][y], array[i][x]];\n                shift = array[i][x]\n                shuffledArray.push(shift)\n            }\n        }\n        return shuffledArray\n    }\n\n\n    const createSchedule = (shifts) => {\n        const updatedEmployees = employees\n        while(shifts.length > 0) {\n            let currentEmployee = updatedEmployees[Math.floor(Math.random() * (updatedEmployees.length))]\n            const shift = shifts[0]\n            const shiftStartTime = convertTimeToNumber(shifts[0].startDate.split(' ').[4])\n            console.log(shiftStartTime)\n\n\n            if(canEmployeeTakeShift(currentEmployee, shift)) {\n                currentEmployee.weekSchedule.push(shift)\n                shifts.splice(shift, 1)\n            }\n\n            // setSchedule({...schedule, shift})\n\n            // setEmployee({...currentEmployee, weekSchedule:[\n            //     schedule\n            // ]})\n\n        }\n        console.log(updatedEmployees)\n\n        // const startTime = shift.startDate.split(' ').[4]\n        // const endTime = shift.endDate.split(' ').[4]\n        // console.log(shift)\n        // console.log(startTime)\n        // console.log(endTime)\n        \n        \n    }\n\n\n    const convertTimeToNumber = (time) => {\n        const startHour = time.split(':').[0]\n        const startMin = time.split(':').[1]\n        console.log(startHour + \" \" + startMin)\n        return (startHour + \".\" + startMin)\n    }\n\n\n    const canEmployeeTakeShift = (employee, shift) => {\n        const shiftDay = shift.startDate.split(' ').[0]\n\n        if (employee) {\n            return true\n        }\n        return false\n    }\n\n    \n    const handleSubmit = (e) => {\n        e.preventDefault()\n        const randomShiftsArray = randomizeShifts(shifts)\n        createSchedule(randomShiftsArray)\n        console.log(employees[0].availability[0].day)\n        //dispatch(editEmployee(employee._id, employee))\n    }\n\n    \n    return (\n        <Grid container direction='column' justify='center' alignItems='center'>\n            <Button color='secondary' style={{width: 300, height: 50, margin:50}} variant='contained' onClick={handleSubmit}>\n                Generate Schedule\n            </Button>\n        </Grid>\n    )\n}\n\nexport default GenerateScheduleButton\n"]},"metadata":{},"sourceType":"module"}